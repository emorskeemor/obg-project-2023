{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { h, ref, onActivated, onDeactivated, onMounted, getCurrentInstance, nextTick, provide } from 'vue';\nimport { createComponent } from '../../utils/private/create.js';\nimport { stopAndPrevent } from '../../utils/event.js';\nimport { addFocusFn } from '../../utils/private/focus-manager.js';\nimport { hSlot } from '../../utils/private/render.js';\nimport { formKey } from '../../utils/private/symbols.js';\nexport default createComponent({\n  name: 'QForm',\n  props: {\n    autofocus: Boolean,\n    noErrorFocus: Boolean,\n    noResetFocus: Boolean,\n    greedy: Boolean,\n    onSubmit: Function\n  },\n  emits: ['reset', 'validation-success', 'validation-error'],\n\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const vm = getCurrentInstance();\n    const rootRef = ref(null);\n    let validateIndex = 0;\n    const registeredComponents = [];\n\n    function validate(shouldFocus) {\n      const promises = [];\n      const focus = typeof shouldFocus === 'boolean' ? shouldFocus : props.noErrorFocus !== true;\n      const index = ++validateIndex;\n\n      const emitEvent = (res, ref) => {\n        emit('validation-' + (res === true ? 'success' : 'error'), ref);\n      };\n\n      for (let i = 0; i < registeredComponents.length; i++) {\n        const comp = registeredComponents[i];\n        const valid = comp.validate();\n\n        if (typeof valid.then === 'function') {\n          promises.push(valid.then(valid => ({\n            valid,\n            comp\n          }), err => ({\n            valid: false,\n            comp,\n            err\n          })));\n        } else if (valid !== true) {\n          if (props.greedy === false) {\n            emitEvent(false, comp);\n\n            if (focus === true && typeof comp.focus === 'function') {\n              comp.focus();\n            }\n\n            return Promise.resolve(false);\n          }\n\n          promises.push({\n            valid: false,\n            comp\n          });\n        }\n      }\n\n      if (promises.length === 0) {\n        emitEvent(true);\n        return Promise.resolve(true);\n      }\n\n      return Promise.all(promises).then(res => {\n        const errors = res.filter(r => r.valid !== true);\n\n        if (errors.length === 0) {\n          index === validateIndex && emitEvent(true);\n          return true;\n        }\n\n        const {\n          valid,\n          comp,\n          err\n        } = errors[0]; // if not outdated already\n\n        if (index === validateIndex) {\n          err !== void 0 && console.error(err);\n          emitEvent(false, comp);\n\n          if (focus === true && valid !== true && typeof comp.focus === 'function') {\n            comp.focus();\n          }\n        }\n\n        return false;\n      });\n    }\n\n    function resetValidation() {\n      validateIndex++;\n      registeredComponents.forEach(comp => {\n        typeof comp.resetValidation === 'function' && comp.resetValidation();\n      });\n    }\n\n    function submit(evt) {\n      evt !== void 0 && stopAndPrevent(evt);\n      const index = validateIndex + 1;\n      validate().then(val => {\n        // if not outdated && validation succeeded\n        if (index === validateIndex && val === true) {\n          if (props.onSubmit !== void 0) {\n            emit('submit', evt);\n          } else if (evt !== void 0 && evt.target !== void 0 && typeof evt.target.submit === 'function') {\n            evt.target.submit();\n          }\n        }\n      });\n    }\n\n    function reset(evt) {\n      evt !== void 0 && stopAndPrevent(evt);\n      emit('reset');\n      nextTick(() => {\n        // allow userland to reset values before\n        resetValidation();\n\n        if (props.autofocus === true && props.noResetFocus !== true) {\n          focus();\n        }\n      });\n    }\n\n    function focus() {\n      addFocusFn(() => {\n        if (rootRef.value === null) {\n          return;\n        }\n\n        const target = rootRef.value.querySelector('[autofocus], [data-autofocus]') || Array.prototype.find.call(rootRef.value.querySelectorAll('[tabindex]'), el => el.tabIndex > -1);\n        target !== null && target !== void 0 && target.focus({\n          preventScroll: true\n        });\n      });\n    }\n\n    provide(formKey, {\n      bindComponent(vmProxy) {\n        registeredComponents.push(vmProxy);\n      },\n\n      unbindComponent(vmProxy) {\n        const index = registeredComponents.indexOf(vmProxy);\n\n        if (index > -1) {\n          registeredComponents.splice(index, 1);\n        }\n      }\n\n    });\n    let shouldActivate = false;\n    onDeactivated(() => {\n      shouldActivate = true;\n    });\n    onActivated(() => {\n      shouldActivate === true && props.autofocus === true && focus();\n    });\n    onMounted(() => {\n      props.autofocus === true && focus();\n    }); // expose public methods\n\n    Object.assign(vm.proxy, {\n      validate,\n      resetValidation,\n      submit,\n      reset,\n      focus,\n      getValidationComponents: () => registeredComponents\n    });\n    return () => h('form', {\n      class: 'q-form',\n      ref: rootRef,\n      onSubmit: submit,\n      onReset: reset\n    }, hSlot(slots.default));\n  }\n\n});","map":{"version":3,"names":["h","ref","onActivated","onDeactivated","onMounted","getCurrentInstance","nextTick","provide","createComponent","stopAndPrevent","addFocusFn","hSlot","formKey","name","props","autofocus","Boolean","noErrorFocus","noResetFocus","greedy","onSubmit","Function","emits","setup","slots","emit","vm","rootRef","validateIndex","registeredComponents","validate","shouldFocus","promises","focus","index","emitEvent","res","i","length","comp","valid","then","push","err","Promise","resolve","all","errors","filter","r","console","error","resetValidation","forEach","submit","evt","val","target","reset","value","querySelector","Array","prototype","find","call","querySelectorAll","el","tabIndex","preventScroll","bindComponent","vmProxy","unbindComponent","indexOf","splice","shouldActivate","Object","assign","proxy","getValidationComponents","class","onReset","default"],"sources":["C:/Users/User/Documents/Projects/Option blocks/website/client/node_modules/quasar/src/components/form/QForm.js"],"sourcesContent":["import { h, ref, onActivated, onDeactivated, onMounted, getCurrentInstance, nextTick, provide } from 'vue'\n\nimport { createComponent } from '../../utils/private/create.js'\nimport { stopAndPrevent } from '../../utils/event.js'\nimport { addFocusFn } from '../../utils/private/focus-manager.js'\nimport { hSlot } from '../../utils/private/render.js'\nimport { formKey } from '../../utils/private/symbols.js'\n\nexport default createComponent({\n  name: 'QForm',\n\n  props: {\n    autofocus: Boolean,\n    noErrorFocus: Boolean,\n    noResetFocus: Boolean,\n    greedy: Boolean,\n\n    onSubmit: Function\n  },\n\n  emits: [ 'reset', 'validation-success', 'validation-error' ],\n\n  setup (props, { slots, emit }) {\n    const vm = getCurrentInstance()\n    const rootRef = ref(null)\n\n    let validateIndex = 0\n    const registeredComponents = []\n\n    function validate (shouldFocus) {\n      const promises = []\n      const focus = typeof shouldFocus === 'boolean'\n        ? shouldFocus\n        : props.noErrorFocus !== true\n\n      const index = ++validateIndex\n\n      const emitEvent = (res, ref) => {\n        emit('validation-' + (res === true ? 'success' : 'error'), ref)\n      }\n\n      for (let i = 0; i < registeredComponents.length; i++) {\n        const comp = registeredComponents[ i ]\n        const valid = comp.validate()\n\n        if (typeof valid.then === 'function') {\n          promises.push(\n            valid.then(\n              valid => ({ valid, comp }),\n              err => ({ valid: false, comp, err })\n            )\n          )\n        }\n        else if (valid !== true) {\n          if (props.greedy === false) {\n            emitEvent(false, comp)\n\n            if (focus === true && typeof comp.focus === 'function') {\n              comp.focus()\n            }\n\n            return Promise.resolve(false)\n          }\n\n          promises.push({ valid: false, comp })\n        }\n      }\n\n      if (promises.length === 0) {\n        emitEvent(true)\n        return Promise.resolve(true)\n      }\n\n      return Promise.all(promises).then(res => {\n        const errors = res.filter(r => r.valid !== true)\n\n        if (errors.length === 0) {\n          index === validateIndex && emitEvent(true)\n          return true\n        }\n\n        const { valid, comp, err } = errors[ 0 ]\n\n        // if not outdated already\n        if (index === validateIndex) {\n          err !== void 0 && console.error(err)\n\n          emitEvent(false, comp)\n\n          if (\n            focus === true\n            && valid !== true\n            && typeof comp.focus === 'function'\n          ) {\n            comp.focus()\n          }\n        }\n\n        return false\n      })\n    }\n\n    function resetValidation () {\n      validateIndex++\n\n      registeredComponents.forEach(comp => {\n        typeof comp.resetValidation === 'function' && comp.resetValidation()\n      })\n    }\n\n    function submit (evt) {\n      evt !== void 0 && stopAndPrevent(evt)\n\n      const index = validateIndex + 1\n\n      validate().then(val => {\n        // if not outdated && validation succeeded\n        if (index === validateIndex && val === true) {\n          if (props.onSubmit !== void 0) {\n            emit('submit', evt)\n          }\n          else if (evt !== void 0 && evt.target !== void 0 && typeof evt.target.submit === 'function') {\n            evt.target.submit()\n          }\n        }\n      })\n    }\n\n    function reset (evt) {\n      evt !== void 0 && stopAndPrevent(evt)\n\n      emit('reset')\n\n      nextTick(() => { // allow userland to reset values before\n        resetValidation()\n        if (props.autofocus === true && props.noResetFocus !== true) {\n          focus()\n        }\n      })\n    }\n\n    function focus () {\n      addFocusFn(() => {\n        if (rootRef.value === null) { return }\n\n        const target = rootRef.value.querySelector('[autofocus], [data-autofocus]')\n          || Array.prototype.find.call(rootRef.value.querySelectorAll('[tabindex]'), el => el.tabIndex > -1)\n\n        target !== null && target !== void 0 && target.focus({ preventScroll: true })\n      })\n    }\n\n    provide(formKey, {\n      bindComponent (vmProxy) {\n        registeredComponents.push(vmProxy)\n      },\n\n      unbindComponent (vmProxy) {\n        const index = registeredComponents.indexOf(vmProxy)\n        if (index > -1) {\n          registeredComponents.splice(index, 1)\n        }\n      }\n    })\n\n    let shouldActivate = false\n\n    onDeactivated(() => {\n      shouldActivate = true\n    })\n\n    onActivated(() => {\n      shouldActivate === true && props.autofocus === true && focus()\n    })\n\n    onMounted(() => {\n      props.autofocus === true && focus()\n    })\n\n    // expose public methods\n    Object.assign(vm.proxy, {\n      validate,\n      resetValidation,\n      submit,\n      reset,\n      focus,\n      getValidationComponents: () => registeredComponents\n    })\n\n    return () => h('form', {\n      class: 'q-form',\n      ref: rootRef,\n      onSubmit: submit,\n      onReset: reset\n    }, hSlot(slots.default))\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}